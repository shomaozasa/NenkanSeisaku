{% extends 'base.html' %}

{% load static %}

{% block title %}ログイン{% endblock %}

{% block contents %}
  {% if form.errors %}
    <p style="color:red; text-align: center; font-size: large;"><span id="mismatch">ユーザー名とパスワードが一致しません。</span></p>
  {% endif %}

  <form method="post" class="text-center">
    {% csrf_token %}
    
    <div>
      <img class="mb-4" src="{% static 'img/user.png' %}" alt="" width="150" height="150">
    </div>

    <h1 class="h3 mb-3 fw-normal">Please sign in</h1>

    <label for="Username" class="visually-hidden">User name</label>

    <input type="text"
           name="username"
           id="id_username"
           maxlength="150"
           autocapitalize="none"
           autocomplete="username"
           class="form-control"
           placeholder="User name"
           required autofocus>
    
    <label for="Password" class="visually-hidden">Password</label>

    <input type="password"
            name="password"
            id="password"
            autocomplete="current-password"
            class="form-control"
            placeholder="Password"
            required autofocus>

    <button class="w-100 btn btn-lg btn-primary"
            type="submit"
            ><span id="login">ログイン</span></button>

    <br><br>
    <p><a href="{% url 'accounts:signup' %}"><span id="signup">アカウントを作成していない方はこちら</span></a></p>
    <p><a href="{% url 'password_reset' %}"><span id="reset_password">パスワードを忘れましたか？</span></a></p>

    <input type="hidden"
            name="next"
            value="{% url 'amazon:index' %}">
  </form>

  <br>
  <p style="text-align: center;"><a href="{% url 'amazon:index' %}"><span id="back">トップへ</span></a></p>

  <script>
    document.getElementById('language-select').addEventListener('change', function () {
      var selectedLanguage = this.value;
      var mismatch = document.getElementById("mismatch");
      if (selectedLanguage === 'ja') {
        mismatch.innerText = "ユーザー名とパスワードが一致しません。";
      }
      else if (selectedLanguage === 'en') {
        mismatch.innerText = "The username and password do not match.";
      }
    })
    document.getElementById('language-select').addEventListener('change', function () {
      var selectedLanguage = this.value;
      var login = document.getElementById("login");
      var signup = document.getElementById("signup");
      var reset_password = document.getElementById("reset_password");
      var back = document.getElementById("back");
      if (selectedLanguage === 'ja') {
        login.innerText = "ログイン";
        signup.innerText = "アカウントを作成していない方はこちら";
        reset_password.innerText = "パスワードを忘れましたか？";
        back.innerText = "トップへ";
      }
      else if (selectedLanguage === 'en') {
        login.innerText = "Login";
        signup.innerText = "If you haven't created an account, click here.";
        reset_password.innerText = "Forgot your password?";
        back.innerText = "Back to top";
      }
    })
  </script>
{% endblock %}

