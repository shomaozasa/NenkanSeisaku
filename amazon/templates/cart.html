{% extends 'base.html' %}

{% block title %}カート{% endblock %}

{% block contents %}
<style>
  ul {
    display: flex;
    flex-wrap: wrap;
  }

  li {
    margin: 10px;
  }
</style>
<a href="{% url 'amazon:address' %}">・住所の確認</a>
<br>
<h3>カートに入っている商品</h3>
<hr style="height: 3px">
{% if cart_items %}
{% for item in cart_items %}
<ul>
  <li>
    <a href="{% url 'amazon:product' product_id=item.product.product_id %}">商品名: {{ item.product.product_name }}</a><br>
    数量:
    <form action="{% url 'amazon:cart_update' cart_item_id=item.id %}" method="post" style="display: inline;">
      {% csrf_token %}
      <input type="hidden" name="action" value="increase">
      <button type="submit">+</button>
    </form>
    {{ item.quantity }}
    <form action="{% url 'amazon:cart_update' cart_item_id=item.id %}" method="post" style="display: inline;">
      {% csrf_token %}
      <input type="hidden" name="action" value="decrease">
      <button type="submit">-</button>
    </form><br>
    {% if item.product.product_image %}
    <img src="{{ item.product.product_image.url }}" alt="{{ item.product.product_name }}" width="100" height="100">
    {% endif %}
    <!-- その他商品情報の表示 -->
    <form action="{% url 'amazon:cart_remove' cart_item_id=item.id %}" method="post">
      {% csrf_token %}
      <button type="submit">削除</button>
    </form>
  </li>
</ul>
{% endfor %}
<hr style="height: 3px">
<a href="{% url 'amazon:purchase' %}">
  <h3>レジに進む</h3>
</a>
{% else %}
<p>カートに商品がありません。</p>
{% endif %}
{% endblock %}