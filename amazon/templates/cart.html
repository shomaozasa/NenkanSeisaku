{% extends 'base.html' %}

{% block title %}カート{% endblock %}

{% block contents %}
<style>
  ul {
    display: flex;
    flex-wrap: wrap;
  }

  li {
    margin: 10px;
  }
</style>
<a href="{% url 'amazon:address' %}">・<span id="verify_address">住所の確認</span></a>
<br>
<h3>▼--<span id="products_in_the_cart">カートに入っている商品</span>--▼</h3>
<hr style="height: 3px">
{% if cart_items %}
{% for item in cart_items %}
<ul>
  <li>
    <a href="{% url 'amazon:product' product_id=item.product.product_id %}"><span id="product_name">商品名</span>: {{ item.product.product_name }}</a><br>
    <span id="quantity">数量</span>
    <form action="{% url 'amazon:cart_update' cart_item_id=item.id %}" method="post" style="display: inline;">
      {% csrf_token %}
      <input type="hidden" name="action" value="increase">
      <button type="submit">+</button>
    </form>
    {{ item.quantity }}
    <form action="{% url 'amazon:cart_update' cart_item_id=item.id %}" method="post" style="display: inline;">
      {% csrf_token %}
      <input type="hidden" name="action" value="decrease">
      <button type="submit">-</button>
    </form><br>
    {% if item.product.product_image %}
    <a href="{% url 'amazon:product' product_id=item.product.product_id %}"><img src="{{ item.product.product_image.url }}" alt="{{ item.product.product_name }}" width="100" height="100">
    {% endif %}
    <form action="{% url 'amazon:cart_remove' cart_item_id=item.id %}" method="post">
      {% csrf_token %}
      <button type="submit"><span id="delete_button">削除</span></button>
    </form>
  </li>
</ul>
{% endfor %}
<br>
<a href="{% url 'amazon:purchase' %}">
  <h3><span id="checkout">レジに進む</span></h3>
</a>
{% else %}
<p><span id="no_products_in_the_cart">カートに商品がありません。</span></p>
{% endif %}

<script>
document.getElementById('language-select').addEventListener('change', function () {
      var selectedLanguage = this.value;
      var verify_address = document.getElementById("verify_address");
      var products_in_the_cart = document.getElementById("products_in_the_cart");
      var product_name = document.getElementById("product_name");
      var quantity = document.getElementById("quantity");
      if (selectedLanguage === 'ja') {
          verify_address.innerText = "住所の確認";
          products_in_the_cart.innerText = "カートに入っている商品";
          product_name.innerText = "商品名";
          quantity.innerText = "数量";
      }
      else if (selectedLanguage === 'en') {
          verify_address.innerText = "Verify your address";
          products_in_the_cart.innerText = "Products in the cart";
          product_name.innerText = "Product name";
          quantity.innerText = "Quantity";
      }
  })
document.getElementById('language-select').addEventListener('change', function () {
      var selectedLanguage = this.value;
      var delete_button = document.getElementById("delete_button");
      var checkout = document.getElementById("checkout");
      if (selectedLanguage === 'ja') {
          delete_button.innerText = "削除";
          checkout.innerText = "レジに進む";
      }
      else if (selectedLanguage === 'en') {
          delete_button.innerText = "Delete";
          checkout.innerText = "Checkout";
      }
  })
document.getElementById('language-select').addEventListener('change', function () {
      var selectedLanguage = this.value;
      var no_products_in_the_cart = document.getElementById("no_products_in_the_cart");
      if (selectedLanguage === 'ja') {
          no_products_in_the_cart.innerText = "カートに商品がありません";
      }
      else if (selectedLanguage === 'en') {
          no_products_in_the_cart.innerText = "No products in the cart";
      }
  })
</script>
{% endblock %}
