{% extends 'base.html' %}

{% block title %}購入情報確認{% endblock %}

{% block contents %}
<style>
  ul {
    display: flex;
    flex-wrap: wrap;
  }

  li {
    margin: 10px;
  }
</style>
<h3>▼--<span id="purchase_confirmation">購入情報確認</span>--▼</h3>
<br>
<h3><span id="product">・購入商品</span></h3>
<hr style="height: 3px">
<ul>
  {% for item in cart_items %}
  <li>
    <a href="{% url 'amazon:product' product_id=item.product.product_id %}">{{ item.product.product_name }}</a><br>
    <span id="price">価格</span>: ¥{{ item.product.price }}<br>
    <span id="quantity">数量</span>: {{ item.quantity }}<br>
    {% if item.product.product_image %}
    <img src="{{ item.product.product_image.url }}" alt="{{ item.product.product_name }}" width="100" height="100">
    {% endif %}
  </li>
  {% endfor %}
</ul>
<hr style="height: 3px">
<br>
<h3><span id="total_price">・合計金額</span></h3>
<h4>¥{{ total_price }}</h4>
<hr style="height: 3px">
<br>
<h3><span id="shipping_address">・お届け先</span></h3>
<ul>
  {% for address in addresses %}
  <li>
    <h4>{{ address }}</h4>
  </li>
  {% endfor %}
</ul>
<a href="{% url 'amazon:update_address' pk=user.pk %}">
  <h4>・<span id="change_your_address">住所を変更する</span></h4>
</a>
<hr style="height: 3px">
<br>
<form action="{% url 'amazon:purchase' %}" method="post">
  {% csrf_token %}
  <button type="submit"><span id="buy">購入する</span></button>
</form>
<br>
<a href="{% url 'amazon:cart' %}">
  <span class="material-symbols-outlined">
shopping_cart
  </span>
  <span id="back">カートに戻る</span></a>

<script>
  document.getElementById('language-select').addEventListener('change', function () {
    var selectedLanguage = this.value;
    var purchase_confirmation = document.getElementById("purchase_confirmation");
    var product = document.getElementById("product");
    var price = document.getElementById("price");
    var quantity = document.getElementById("quantity");
    var total_price = document.getElementById("total_price");
    var shipping_address = document.getElementById("shipping_address");
    var change_your_address = document.getElementById("change_your_address");
    var buy = document.getElementById("buy");
    var back = document.getElementById("back");
  if (selectedLanguage === 'ja') {
    purchase_confirmation.innerText = "購入情報確認";
    product.innerText = "購入商品";
    price.innerText = "価格";
    quantity.innerText = "数量";
    total_price.innerText = "合計金額";
    shipping_address.innerText = "お届け先";
    change_your_address.innerText = "住所を変更する";
    buy.innerText = "購入する";
    back.innerText = "カートに戻る";
  }
  else if (selectedLanguage === 'en') {
    purchase_confirmation.innerText = "Purchase confirmation";
    product.innerText = "Product";
    price.innerText = "Price";
    quantity.innerText = "Quantity";
    total_price.innerText = "Total price";
    shipping_address.innerText = "Shipping address";
    change_your_address.innerText = "Change your address";
    buy.innerText = "Buy";
    back.innerText = "Back to cart";
  }
  })
</script>
{% endblock %}
